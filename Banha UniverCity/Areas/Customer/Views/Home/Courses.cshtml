@model BFCAI.Models.ViewModels.CoursePageVM

@{
    Layout = "_RegistreationLayout";
}
<style>
    h6 {
        font-weight: bold;
    }

    .coursesPage {
        display: flex;
        align-items: start;
        justify-content: start;
        margin-bottom:40px;
    }
    .filterPart{
        width:25%;
    }

    .courses{
       
        overflow:auto;
    }


</style>
<section class="coursesPage d-flex container">

    <div class="filterPart">

        <form method="get" action="@Url.Action("Courses", "Home")">
            <div class="container-fluid d-flex">
                <!-- Filtration Section -->
                <div class=" p-2 mt-3 border-end">
                    <h5 class="fw-bold">Filters</h5>

                    <!-- Category Filter -->
                    <div class="mb-4">
                        <h6>Category</h6>
                        <ul class="list-unstyled">
                            @foreach (var category in Model.DepartmentList)
                            {
                                <li>
                                    <input type="radio" name="categoryFilter" id="category-@category.DepartmentID" value="@category.DepartmentID"
                                           class="filter-checkbox" @(ViewBag.categoryFilter == category.DepartmentID ? "checked" : "") />
                                    <label for="category-@category.DepartmentID">@category.DepartmentName</label>
                                </li>
                            }
                        </ul>
                    </div>

                 
                    <!-- Rating Filter -->
                    <div class="mb-4">
                        <h6>Rating</h6>
                        <ul class="list-unstyled">
                            @for (int i = 5; i >= 1; i--)
                            {
                                <li>
                                    <input type="radio" name="rate" id="rating-@i" value="@i"
                                           class="filter-checkbox" @(ViewBag.rate == i ? "checked" : "") />
                                    <label for="rating-@i">
                                        @for (int j = 0; j < i; j++)
                                        {
                                            <i class="fa-solid fa-star text-warning"></i>
                                        }
                                        & Up
                                    </label>
                                </li>
                            }
                        </ul>
                    </div>

                    <!-- Price Range Filter -->
                    <div class="mb-4">
                        <h6>Price Range</h6>
                        <input type="range" id="price-range" name="price" class="form-range" min="0" max="1000" step="50"
                               value="@ViewBag.price" oninput="updatePriceLabel(this.value)" />
                        <div class="d-flex justify-content-between">
                            <span>$0</span>
                            <span id="price-range-label">$@(ViewBag.price==null?"500":ViewBag.price)</span>
                        </div>
                    </div>
                    <script>
                        function updatePriceLabel(value) {
                            document.getElementById("price-range-label").textContent = "$" + value;
                        }

                    </script>
                    <!-- Buttons for Applying and Clearing Filters -->
                    <button type="submit" class="btn btn-outline-primary">Apply Filters</button>
                    <a href="@Url.Action("Courses", "Home")" class="btn btn-outline-secondary ms-2">Clear Filters</a>
                </div>
            </div>
        </form>
    </div>
    <div id="courses" class="courses d-flex justify-content-between align-items-center container p-3 mb-5">

        <div class=" p-3 courseSection ">

            <div class="mb-4">
                @if (ViewBag.Search != null)
                {
                    <h4>
                        Courses that have <span class="text-warning">@ViewBag.Search</span>
                    </h4>
                }
                else if (ViewBag.InstructorId!=null)

                {
                    
                <h4>Courses for You by @Model.CourseList.FirstOrDefault().Instructor.FullName</h4>
                }
            </div>
            <div id="main" class="top-courses ">
                @if(Model.CourseList.Any()){
                    @foreach (var course in Model.CourseList)
                    {



                        <div id="card-@course.CourseID" class="one-course" onclick="goTo('Customer','Home','Courses',@course.CourseID)" onmouseover="openModalWhenHover(@course.CourseID, 'main')" onmouseleave="closeModal(@course.CourseID, 'main')">
                            <div class="course-video mb-3">
                                <img src="/Covers/@course.ImgCover" alt="Alternate Text" />
                            </div>
                            <div class="course-title">
                                <h5>@course.CourseName</h5>
                            </div>
                            <div class="w-75 instructor">
                                <h6>@course.Instructor?.FullName</h6>
                            </div>

                            <!-- Rating -->
                            <div class="rating">
                                @for (int i = 0; i < course.Rate; i++)
                                {
                                    <span class="fa fa-star"></span>
                                }
                                @for (int i = 0; i < (5 - course.Rate); i++)
                                {
                                    <span class="fa fa-star-o"></span>
                                }
                            </div>

                            <!-- Price -->
                            <div class="price">
                                <span> $@course.Price</span>
                            </div>

                            <!-- Hidden modal for each course -->
                            <div class="modal-test p-4" id="modal-main-@course.CourseID">
                                <!-- Course Name Section -->
                                <div class="modal-course-header ">
                                    <h3 class="modal-course-name mb-3">@course.CourseName</h3>
                                    <h5>by <span>@course.Instructor?.FullName</span></h5>
                                </div>

                                <!-- Course Stats Section -->
                                <div class="modal-course-details d-flex justify-content-between mb-2">
                                    <div class="course-videos">
                                        <span><i class="fas fa-play-circle me-2"></i>@course.CourseCurricula.Count Videos</span>
                                    </div>

                                    <div class="course-enrollments">
                                        <span><i class="fas fa-users me-2"></i>@course.Enrollments.Count Enrolled</span>
                                    </div>
                                </div>

                                <!-- Course Description Section -->
                                <div class="modal-course-description mb-2">
                                    <p> @course.Description</p>
                                </div>

                                <!-- Course Topics and Objectives Section -->
                                <div class="modal-course-about ">

                                    <div class="course-objectives ">

                                        <ul class="list-unstyled">
                                            @foreach (var item in course.LearningObjectives)
                                            {
                                                <li class="d-flex justify-content-start align-items-baseline gap-1">

                                                    <i class="fas fa-check-circle text-success me-2"></i>

                                                    <p class="m-1"> @item.Objective</p>


                                                </li>
                                            }
                                        </ul>
                                    </div>
                                </div>

                                <!-- Course Call to Action -->
                                <div class="d-flex justify-content-center mt-2">
                                    <a asp-controller="Cart" asp-action="AddToCart" asp-route-courseId="@course.CourseID" asp-route-quantity="1" class="btn cus-btn px-5 py-2" style="border-radius: 5px; font-size: 1.1rem;">Add to Cart</a>
                                </div>
                            </div>

                        </div>









                    }
                }
                else
                {
                    <h6>No Result Found ...</h6>
                }

            </div>
        </div>
    </div>
</section>