@model BFCAI.Models.ViewModels.HomeStudentViewModels
<style>
    body {
        background-color: rgb(242, 242, 242);
        font-family: 'Poppins', sans-serif;
        color: #333;
    }

    .post-feed {
        display: flex;
        flex-direction: column;
    }

    .post-card {
        background: #fafafa;
        border: 1px solid #e0e0e0;
        transition: box-shadow 0.2s ease;
    }

        .post-card:hover {
            box-shadow: 0 4px 16px rgba(0,0,0,0.08);
        }

    .post-content p {
        margin-bottom: 0.5rem;
    }

</style>


<div class="dashboard-layout container-fluid">

    <!-- Course Schedule -->
    <div class="dashboard-section">
        <h5>Course Schedule</h5>
        @foreach (var course in Model.Courses)
        {
            @foreach (var schedule in Model.ClassSchedule.Where(s => s.CourseId == course.CourseID))
            {
                <div class="list-group-item">
                    <h6>@course.CourseName</h6>
                    <strong>Date:</strong> @schedule.StartTime.ToShortDateString()<br />
                    <strong>Time:</strong> @schedule.StartTime.ToString(@"hh\:mm")
                </div>
            }
        }
    </div>

    <!-- Planned Courses (Middle Section) -->
    <div class="dashboard-section">
        <h5>Your Planned Courses</h5>
        <table class="table table-hover">
            <thead>
                <tr>

                    <th>Name</th>
                    <th>Deadline</th>
                    <th>Status</th>
                    <th>Material</th>
                    <th>Quick</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var course in Model.Courses)
                {
                    <tr>

                        <td>@course.CourseName</td>
                        <td>@course.EndDate?.ToShortDateString()</td>
                        <td>
                            @if (course.StartDate > DateTime.Now)
                            {
                                <span class="text-warning">@StaticData.Comming_Status</span>
                            }
                            else
                            {
                                <span class="text-success">@StaticData.In_Process_Status</span>
                            }
                        </td>
                        <td>
                            <a asp-action="CourseProcess" asp-route-id="@course.CourseID" class="btn btn-outline-primary btn-sm">Material</a>
                        </td>
                        <td>
                            <a onclick="QuickAccessToSpacifcCourse(@course.CourseID)" class="btn btn-outline-info btn-sm">
                                <i class="fas fa-eye"></i>
                            </a>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>

    <!-- Feedback Section -->
    <div class="dashboard-section">
        <h5 class="mb-4">Student Feedback</h5>

        @if (Model.Feedbacks.Any())
        {
            <div class="feedback-list">
                @foreach (var feedback in Model.Feedbacks)
                {
                    <div class="card feedback-card shadow-sm mb-3">
                        <div class="card-body d-flex">
                            <!-- User Picture -->
                            <div class="me-3">
                                <img src="@feedback.ProviderUser?.Picture" class="rounded-circle user-img" alt="User" />
                            </div>

                            <!-- Feedback Content -->
                            <div class="flex-grow-1">
                                <div class="d-flex justify-content-between align-items-center mb-1">
                                    <h6 class="mb-0">@feedback.ProviderUser?.FullName</h6>
                                    <small class="text-muted">@feedback.FeedbackDate.ToString("dd MMM yyyy")</small>
                                </div>

                                <!-- Star Rating -->
                                <div class="rating mb-2">
                                    @for (int i = 1; i <= 5; i++)
                                    {
                                        <span class="fa fa-star @(i <= feedback.Rating ? "checked" : "")"></span>
                                    }
                                </div>

                                <p class="feedback-text mb-0">@feedback.Content</p>
                            </div>
                        </div>
                    </div>
                }
            </div>
        }
        else
        {
            <div class="alert alert-light border text-muted">No feedback available.</div>
        }
    </div>


</div>
<section class="for-student container-fluid py-3">
    <div class="recommended-section p-3">
        <h4>Recommended Courses</h4>

        @foreach (var course in Model.SomeAvailableCourse)
        {
            <div onclick="goTo('customer','home','details',@course.CourseID)" class=" course-card shadow-sm rounded">
                <img src="/Covers/@course.Image" alt="@course.Title" />

                <div class="course-content">
                    <p class="course-title">@course.Title</p>
                    <p class="course-description">@course.Description</p>

                </div>
                <div class="me-2 d-flex align-items-center">
                    <span class="rating-number">@course.Rate</span>
                    <span class="fa fa-star  checked"></span>


                </div>
                <div class="me-2 d-flex align-items-center">
                    <span class="fa fa-user "></span>
                    <span>@course.NumOfEnrolments </span>
                </div>
                <span>@course.Price </span>
            </div>
        }
    </div>

    <div class="posts">
        <!-- You can add related blog posts, updates, or announcements here -->
        <div class="post-container w-50">
            <h4>Posts Apout Your Intersting</h4>
            @foreach (var post in Model.Posts)
            {
                <div class="post-card  shadow-sm rounded p-3 mb-4">
                    <div class="d-flex align-items-center mb-2">
                        <img src="@post.UserProfilePic" alt="@post.UserName" class="rounded-circle me-2" style="width:40px;height:40px;object-fit:cover;">
                        <div>
                            <strong>@post.UserName</strong><br />
                            <small class="text-muted">@post.CreatedAt.ToString("MMM dd, yyyy - hh:mm tt")</small>
                        </div>
                    </div>
                    <div class="post-content mb-2">
                        <p>@post.Content</p>
                        @if (!string.IsNullOrEmpty(post.Attachment))
                        {
                            <img src="/@post.Attachment" alt="Attachment" class="img-fluid rounded" />
                        }
                    </div>
                    <div class="text-end">
                        <button class="btn btn-sm btn-outline-secondary me-2"><i class="fa fa-comment"></i> Comment</button>
                        <button class="btn btn-sm btn-outline-primary"><i class="fa fa-thumbs-up"></i> Like</button>
                    </div>
                </div>
            }
        </div>
        <div class="recom-community w-50 bg-light" >
            <h4 class="">Suggested Communities</h4>

            @foreach (var community in Model.Communities)
            {
                <div onclick="goTo('customer','community','index',`?id=@community.Id`)" class="community-card shadow-sm p-3 mb-3 rounded bg-white">
                    <h5 class="mb-1">@community.Name</h5>
                    <p class="mb-0 text-muted">@community.Description.Substring(1,community.Description.Length/3)</p>
                </div>
            }
        </div>
     
    </div>
</section>
















