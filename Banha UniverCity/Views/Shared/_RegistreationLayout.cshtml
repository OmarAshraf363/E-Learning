@using Banha_UniverCity.Repository.IRepository
@using Microsoft.AspNetCore.Identity
@inject IUnitOfWork _unitOfWork;
@inject UserManager<IdentityUser> _userManger
@{
    var userId = _userManger.GetUserId(User);
    var cart = _unitOfWork.cartRepository.GetOne(e => e.UserId == userId);
   

}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@ViewData["Title"] - Bfcai Platform</title>

    <!-- CSS and Bootstrap -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.6/main.min.css" rel="stylesheet">
    <link href="~/css/global.css" rel="stylesheet"  asp-append-version="true"/>
    <link href="~/css/home.css" rel="stylesheet" asp-append-version="true" />
    <link href="~/css/comunity.css" rel="stylesheet" asp-append-version="true" />
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        header {
            position: fixed;
            top: 0;
            width: 100%;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            padding: 10px;
            background-color: rgb(83, 42, 164);
        }

            header h1 {
                margin: 0;
                font-size: 2rem;
            }

            header span {
                color: #ffc107;
            }

            header .head {
                display: flex;
                align-items: center;
                justify-content: space-between;
                padding-inline:20px;
            }

            header nav ul {
                list-style: none;
                margin: 0;
                padding: 0;
            }

                header nav ul li {
                    display: inline-block;
                    margin-right: 20px;
                }

                header nav ul a {
                    text-decoration: none;
                    color: #ccc;
                    transition: color 0.3s ease;
                }

                    header nav ul a:hover {
                        color: #ffc107;
                    }

        .cart-icon {
            color: white;
            font-size: 1.5rem;
            position: relative;
        }

            .cart-icon:hover {
                color: #ffc107;
            }

        .cart-counter {
            position: absolute;
            top: -10px;
            right: -10px;
            background-color: red;
            color: white;
            font-size: 0.8rem;
            padding: 3px 7px;
            border-radius: 50%;
        }

        footer {
            background-color: #343a40;
            padding: 40px 0;
            color: white;
            position:absolute;
            bottom:0;
        }

            footer .footer-links ul {
                list-style-type: none;
                padding: 0;
            }

                footer .footer-links ul li {
                    margin-bottom: 10px;
                }

            footer .footer-links a {
                color: #ccc;
                text-decoration: none;
                transition: color 0.3s ease;
            }

                footer .footer-links a:hover {
                    color: #ffc107;
                }

            footer .social-icons a {
                color: white;
                font-size: 1.5rem;
                margin-right: 15px;
                transition: color 0.3s ease;
            }

                footer .social-icons a:hover {
                    color: #ffc107;
                }
    </style>
</head>
<body>
    <!-- Header Section -->
    <header class="container-fluid">
        <div class="container-fluid head">
            <a href="/Customer" class="text-light text-decoration-none">

            <h1>BFC<span>ai</span></h1>

            </a>

            <!-- Navigation Links -->
            <nav>
                <ul class="d-flex list-unstyled justify-content-between align-items-center ">
                    <li><a asp-area="Customer" asp-controller="Home" asp-action="Courses" >Courses</a></li>
                    <li><a asp-area="Customer" asp-controller="Home" asp-action="Category" >Categories | Departments</a></li>
                    @if(User.IsInRole(StaticData.role_Student)){

                    <li><a asp-area="Student" asp-controller="DashBoard" asp-action="Index">My Learning</a></li>
                    }
                    <li><a asp-area="Customer" asp-controller="Community" asp-action="Index">Communites</a></li>

                </ul>
            </nav>

            <!-- Search bar -->
            <form class="d-flex w-50" asp-action="Courses" method="get">
                <input type="search" value="@ViewBag.search" class="form-control w-75 rounded-3 bg-light" placeholder="Search..." name="search">
                <button type="submit" class="btn btn-warning ms-2"><i class="fas fa-search"></i></button>
            </form>

            <!-- Shopping Cart Icon -->
            <div class="d-flex align-items-center">
                <a href="/Customer/Cart" class="cart-icon position-relative">
                    <i class="fas fa-shopping-cart"></i>
                    @if (User.Identity.IsAuthenticated)
                    {
                        if (cart!=null)
                        {
                            
                        <span class="cart-counter">@_unitOfWork.cartItemRepository.Get(e=>e.CartId==cart.Id).Count()</span>
                        }
                    }
                </a>
            </div>

            <!-- Login/Register Partial -->
            <partial name="_LoginPartial"></partial>
        </div>
    </header>

    <!-- Main Content Area -->
    <main class="container-fluid" style="padding-top: 70px;">
        @RenderBody()
    </main>

    <!-- Footer Section -->
@*     <footer class="container-fluid">
        <div class="container">
            <div class="row">
                <!-- About Section -->
                <div class="col-md-4">
                    <h5>About Us</h5>
                    <p>Bfcai Platform is dedicated to providing top-notch courses and resources for students. Join us to advance your knowledge and skills in various fields.</p>
                </div>

                <!-- Links Section -->
                <div class="col-md-4 footer-links">
                    <h5>Quick Links</h5>
                    <ul>
                        <li><a href="#">Courses</a></li>
                        <li><a href="#">Departments</a></li>
                        <li><a href="#">Contact Us</a></li>
                        <li><a href="#">Privacy Policy</a></li>
                    </ul>
                </div>

                <!-- Contact and Social Media Section -->
                <div class="col-md-4">
                    <h5>Contact Us</h5>
                    <p><i class="fas fa-map-marker-alt"></i> 123 Education Lane, University Town</p>
                    <p><i class="fas fa-phone"></i> +123 456 7890</p>
                    <p><i class="fas fa-envelope"></i> support@bfcaiplatform.com</p>

                    <!-- Social Media Icons -->
                    <div class="social-icons mt-3">
                        <a href="#"><i class="fab fa-facebook"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-linkedin"></i></a>
                    </div>
                </div>
            </div>
        </div>
    </footer> *@

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.6/main.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="~/js/site.js" asp-append-version="true"></script>

    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>
